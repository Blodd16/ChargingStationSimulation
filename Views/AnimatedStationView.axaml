<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:models="using:ChargingStationSimulation.Models"
             x:Class="ChargingStationSimulation.Views.AnimatedStationView"
             Width="400" Height="500">

  <!-- Realistic Animated Charging Station -->
  <Border CornerRadius="20" Margin="10">
    <Border.Background>
      <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
        <GradientStop Offset="0" Color="#1A1F2E"/>
        <GradientStop Offset="0.5" Color="#2C3E50"/>
        <GradientStop Offset="1" Color="#1A1F2E"/>
      </LinearGradientBrush>
    </Border.Background>
    <Border.Effect>
      <DropShadowEffect BlurRadius="30" Color="#000000" Opacity="0.7" OffsetY="10"/>
    </Border.Effect>

    <Grid>
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <!-- Header -->
        <RowDefinition Height="Auto"/>
        <!-- Display -->
        <RowDefinition Height="*"/>
        <!-- Animation Area -->
        <RowDefinition Height="Auto"/>
        <!-- Status -->
      </Grid.RowDefinitions>

      <!-- Station Header with Animated Lights -->
      <Border Grid.Row="0" Background="#1ABC9C" CornerRadius="20,20,0,0" Padding="15,12">
        <Grid>
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
          </Grid.ColumnDefinitions>
          
          <!-- Animated Status Light -->
          <Ellipse Grid.Column="0" Width="12" Height="12" Margin="0,0,10,0">
            <Ellipse.Fill>
              <SolidColorBrush Color="#FFD93D"/>
            </Ellipse.Fill>
            <Ellipse.Effect>
              <DropShadowEffect BlurRadius="10" Color="#FFD93D" Opacity="0.8"/>
            </Ellipse.Effect>
          </Ellipse>
          
          <TextBlock Grid.Column="1" x:Name="StationTitle" Text="STATION 01" 
                     FontSize="16" FontWeight="Bold" Foreground="White" 
                     VerticalAlignment="Center"/>
          
          <Border Grid.Column="2" Background="White" CornerRadius="10" Padding="10,4">
            <TextBlock Text="ONLINE" FontSize="10" FontWeight="Bold" Foreground="#1ABC9C"/>
          </Border>
        </Grid>
      </Border>

      <!-- Digital Display with Real-time Info -->
      <Border Grid.Row="1" Background="#0A0E27" Margin="15" 
              CornerRadius="12" Height="100" BorderBrush="#1ABC9C" BorderThickness="2">
        <Border.Effect>
          <DropShadowEffect BlurRadius="15" Color="#1ABC9C" Opacity="0.5"/>
        </Border.Effect>

        <Grid Margin="15">
          <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
          </Grid.RowDefinitions>

          <StackPanel Grid.Row="0" Orientation="Horizontal">
            <TextBlock Text="⚡" FontSize="14" Foreground="#FFD93D" Width="25"/>
            <TextBlock Text="POWER: " FontSize="11" Foreground="#1ABC9C" FontWeight="Bold"/>
            <TextBlock x:Name="PowerDisplay" Text="0.0 kW" FontSize="11" 
                       Foreground="#00FF88" FontWeight="Bold"/>
          </StackPanel>

          <StackPanel Grid.Row="1" Orientation="Horizontal">
            <TextBlock Text="📊" FontSize="14" Foreground="#FFD93D" Width="25"/>
            <TextBlock Text="USAGE: " FontSize="11" Foreground="#1ABC9C" FontWeight="Bold"/>
            <TextBlock x:Name="UtilizationDisplay" Text="0%" FontSize="11" 
                       Foreground="#00FF88" FontWeight="Bold"/>
          </StackPanel>

          <StackPanel Grid.Row="2" Orientation="Horizontal">
            <TextBlock Text="🔌" FontSize="14" Foreground="#FFD93D" Width="25"/>
            <TextBlock Text="SLOTS: " FontSize="11" Foreground="#1ABC9C" FontWeight="Bold"/>
            <TextBlock x:Name="SlotsDisplay" Text="0/4" FontSize="11" 
                       Foreground="#00FF88" FontWeight="Bold"/>
          </StackPanel>
        </Grid>
      </Border>

      <!-- MAIN ANIMATION CANVAS - This is where vehicles move! -->
      <Border Grid.Row="2" Background="#1A1F2E" Margin="15,0,15,15" 
              CornerRadius="15" ClipToBounds="True">
        <Grid>
          <!-- Road/Parking Area -->
          <Canvas x:Name="AnimationCanvas" Background="#2C3548">
            <!-- Parking Lines (will be drawn in code) -->
          </Canvas>
          
          <!-- Charging Ports on the side -->
          <ItemsControl x:Name="ChargingPortsControl" HorizontalAlignment="Left" 
                       VerticalAlignment="Center" Margin="10,0,0,0">
            <ItemsControl.ItemsPanel>
              <ItemsPanelTemplate>
                <StackPanel Spacing="20" Orientation="Vertical"/>
              </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
          </ItemsControl>
          
          <!-- Queue indicator on right side -->
          <StackPanel x:Name="QueuePanel" HorizontalAlignment="Right" 
                     VerticalAlignment="Center" Margin="0,0,10,0" Spacing="10">
            <!-- Queue vehicles will appear here -->
          </StackPanel>
        </Grid>
      </Border>

      <!-- Status Panel -->
      <Border Grid.Row="3" Margin="15,0,15,15">
        <Border Background="#0A0E27" CornerRadius="12" Padding="15">
          <Grid>
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="*"/>
              <ColumnDefinition Width="*"/>
              <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Active -->
            <StackPanel Grid.Column="0" HorizontalAlignment="Center">
              <Border Width="40" Height="40" CornerRadius="20" 
                     Background="#1ABC9C" Margin="0,0,0,8">
                <TextBlock Text="🔋" FontSize="20" HorizontalAlignment="Center" 
                          VerticalAlignment="Center"/>
              </Border>
              <TextBlock x:Name="ChargingCount" Text="0" FontSize="24" 
                        FontWeight="Bold" Foreground="#1ABC9C" 
                        HorizontalAlignment="Center"/>
              <TextBlock Text="CHARGING" FontSize="9" Foreground="#BDC3C7" 
                        HorizontalAlignment="Center" FontWeight="Bold"/>
            </StackPanel>

            <!-- Queue -->
            <StackPanel Grid.Column="1" HorizontalAlignment="Center">
              <Border Width="40" Height="40" CornerRadius="20" 
                     Background="#F39C12" Margin="0,0,0,8">
                <TextBlock Text="⏳" FontSize="20" HorizontalAlignment="Center" 
                          VerticalAlignment="Center"/>
              </Border>
              <TextBlock x:Name="QueueCount" Text="0" FontSize="24" 
                        FontWeight="Bold" Foreground="#F39C12" 
                        HorizontalAlignment="Center"/>
              <TextBlock Text="WAITING" FontSize="9" Foreground="#BDC3C7" 
                        HorizontalAlignment="Center" FontWeight="Bold"/>
            </StackPanel>

            <!-- Available -->
            <StackPanel Grid.Column="2" HorizontalAlignment="Center">
              <Border Width="40" Height="40" CornerRadius="20" 
                     Background="#3498DB" Margin="0,0,0,8">
                <TextBlock Text="✓" FontSize="20" HorizontalAlignment="Center" 
                          VerticalAlignment="Center" Foreground="White" FontWeight="Bold"/>
              </Border>
              <TextBlock x:Name="AvailableCount" Text="0" FontSize="24" 
                        FontWeight="Bold" Foreground="#3498DB" 
                        HorizontalAlignment="Center"/>
              <TextBlock Text="FREE" FontSize="9" Foreground="#BDC3C7" 
                        HorizontalAlignment="Center" FontWeight="Bold"/>
            </StackPanel>
          </Grid>
        </Border>
      </Border>
    </Grid>
  </Border>

  <!-- Animations -->
  <UserControl.Styles>
    <!-- Pulsing Status Light -->
    <Style Selector="Ellipse">
      <Style.Animations>
        <Animation Duration="0:0:2" IterationCount="Infinite">
          <KeyFrame Cue="0%">
            <Setter Property="Opacity" Value="1.0"/>
          </KeyFrame>
          <KeyFrame Cue="50%">
            <Setter Property="Opacity" Value="0.5"/>
          </KeyFrame>
          <KeyFrame Cue="100%">
            <Setter Property="Opacity" Value="1.0"/>
          </KeyFrame>
        </Animation>
      </Style.Animations>
    </Style>
  </UserControl.Styles>
</UserControl>